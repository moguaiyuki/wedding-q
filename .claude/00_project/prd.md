# 結婚式クイズアプリ 要件定義書（完成版）

## 1. プロジェクト概要

結婚式披露宴の余興で使用するリアルタイムクイズアプリケーション。参加者60名が各自のスマートフォンから参加し、新郎新婦に関するクイズに回答する。参加者用アプリ、管理者用アプリ、プレゼンテーション画面の3つのシステムから構成される。

## 2. システム構成

### 2.1 参加者用アプリ
- 結婚式の参加者がスマートフォンからクイズに参加するためのWebアプリケーション
- 各自のモバイル通信環境を使用

### 2.2 管理者用アプリ
- 新郎新婦がクイズを管理・運営するためのWebアプリケーション
- パスワード保護によるアクセス制限

### 2.3 プレゼンテーション画面
- 会場スクリーンに投影する専用表示画面
- 管理者用アプリから表示内容を制御

## 3. 機能要件

### 3.1 参加者用アプリ

#### 3.1.1 ログイン機能
- **QRコード読み取り**: 席札に印刷された個別QRコードを読み取ってログイン
- **名前設定**: 
  - 事前登録されたフルネームがデフォルト表示
  - ニックネームへの変更可能（20文字以内、絵文字不可、重複不可）
  - ニックネーム未設定時はフルネームを使用
- **複数端末対応**: 同一QRコードでの複数端末ログイン可（同一画面表示、操作は先勝）

#### 3.1.2 クイズ参加機能
- **待機画面**: クイズ開始まで待機状態を表示
- **問題表示**: 
  - 問題文（画像（任意）＋文章）と選択肢を表示
  - 選択肢は画像または文章
- **回答機能**: 
  - 選択肢から回答を選択
  - 同一QRコードでの重複回答は不可（エラー表示→回答済み画面へ遷移）
- **回答締切**: 管理者の締切操作で回答不可→待機画面へ遷移
- **結果表示**: 正解/不正解を表示
- **次問遷移**: 次の問題へ自動遷移

#### 3.1.3 ランキング機能
- **個人成績**: 自分の正解数を常時確認可能
- **全体ランキング**: 
  - 全参加者（60名）のランキングを表示
  - 名前の横にグループラベル表示（新郎友人/新郎親族/新婦友人/新婦親族）
  - リアルタイム更新
- **プライバシー**: 他参加者の個別回答内容は非表示

#### 3.1.4 接続復帰機能
- **途中参加**: 現在進行中の問題から参加可能
- **再接続**: 接続切断後も続きから参加可能
- **リロード対応**: ブラウザリロード後も状態を維持

### 3.2 管理者用アプリ

#### 3.2.1 参加者管理機能
- **参加者登録**: 
  - 60名分を個別に手動登録
  - フルネームとグループ属性（新郎友人/新郎親族/新婦友人/新婦親族）を設定
  - 個別QRコード生成（印刷用）

#### 3.2.2 問題管理機能
- **問題作成/編集**: 
  - 問題文：画像（任意）＋文章
  - 選択肢：画像または文章
  - 正解設定
  - 解説：画像（任意）＋文章
- **問題数**: 柔軟に変更可能（4〜10問程度を想定）
- **出題順序**: 事前設定した順番で進行

#### 3.2.3 クイズ運営機能
- **進行制御**:
  - クイズ開始
  - 回答締切（任意のタイミング）
  - 正解発表
  - 次問題への進行
- **UNDO機能**:
  - 「次の問題に進む」の取り消し
  - 「回答締切」の取り消し（回答受付再開）
  - 「正解発表」の取り消し
- **プレゼンテーション制御**: スクリーン表示内容の切り替え

#### 3.2.4 統計表示機能
- **リアルタイム確認**:
  - 各問題の正答率
  - 全参加者の成績一覧
  - 現在のランキング

#### 3.2.5 データ管理機能
- **初期化機能**: 参加者の回答データのみクリア（問題・参加者登録は保持）
- **結果保存**: 最終結果をWeb上で閲覧可能（ダウンロード機能は不要）

### 3.3 プレゼンテーション画面

#### 3.3.1 表示内容
- **待機画面**: クイズ開始前/問題間の待機表示
- **問題表示**: 問題文（画像含む）と選択肢
- **正解発表**: 正解と解説（画像含む）
- **統計表示**: 
  - 各問題の正答率
  - 現在のランキング（グループラベル付き）
- **最終ランキング**: 全参加者の最終順位

#### 3.3.2 表示制御
- 管理者用アプリから手動で表示内容を切り替え
- 回答状況のリアルタイム表示は不要
- カウントダウン表示は不要

## 4. 画面遷移

### 4.1 参加者用アプリ
```
トップページ
    ↓ (QRコード読み取り)
ログイン画面（名前確認/ニックネーム設定）
    ↓
待機画面
    ↓ (管理者がクイズ開始)
問題画面
    ↓ (回答選択)
回答済み画面
    ↓ (管理者が締切)
待機画面
    ↓ (管理者が正解発表)
結果画面（正解/不正解表示）
    ↓ (管理者が次問開始)
問題画面（次の問題）
    ↓
    （繰り返し）
    ↓
最終ランキング画面
```

### 4.2 管理者用アプリ
```
ログイン画面（パスワード認証）
    ↓
管理画面ダッシュボード
    ├─ 参加者管理
    ├─ 問題管理
    ├─ クイズ運営
    ├─ プレゼンテーション制御
    └─ データ初期化
```

## 5. 非機能要件

### 5.1 パフォーマンス要件
- **同時接続数**: 60名の同時接続に対応
- **リアルタイム性**: 管理者操作が即座に全参加者画面に反映
- **通信環境**: 各参加者のモバイル通信環境での動作

### 5.2 ユーザビリティ要件
- **レスポンシブデザイン**: スマートフォン最適化
- **直感的UI**: 幅広い年齢層が操作可能
- **エラーハンドリング**: 分かりやすいエラーメッセージ

### 5.3 信頼性要件
- **接続復帰**: 通信断絶からの自動復帰
- **状態保持**: リロード時の進行状態維持
- **運営用バックアップ**: ポケットWiFi準備

## 6. データ要件

### 6.1 参加者データ
- フルネーム
- ニックネーム（任意）
- グループ属性（新郎友人/新郎親族/新婦友人/新婦親族）
- QRコードID
- 回答履歴
- 正解数

### 6.2 問題データ
- 問題文（テキスト）
- 問題画像（任意）
- 選択肢（テキストまたは画像）
- 正解
- 解説文（テキスト）
- 解説画像（任意）
- 出題順序

### 6.3 セッションデータ
- 現在の問題番号
- 各問題の状態（待機/回答受付中/締切/正解発表済）
- 各参加者の回答状況

## 7. セキュリティ要件

- **管理者認証**: パスワードによるアクセス制限
- **参加者認証**: 個別QRコードによる識別
- **プライバシー保護**: 他参加者の個別回答内容は非表示

## 8. 運用要件

### 8.1 事前準備（1ヶ月前）
- リハーサル実施（模擬60名登録でのテスト）
- 問題作成・登録
- 参加者登録
- QRコード生成・席札印刷

### 8.2 当日運用
- 余興時間：約20分
- 問題数：4〜10問（時間に応じて調整）
- 新郎新婦による直接操作
- 音声アナウンスによる進行（効果音不要）

### 8.3 本番後
- 最終結果のWeb閲覧

## 9. 制約事項

- スマートフォン非所持者への対応は含まない
- CSVによる一括登録機能は含まない
- 画像のサイズ制限・アスペクト比指定は不要
- 結果のダウンロード機能は不要
- 正解発表時の効果音は不要
- 回答時間のカウントダウン表示は不要

## 10. 実装備考

- Claude Codeでの実装を想定
- 使用技術・デザインは別途定義
- WebSocketまたは類似技術によるリアルタイム通信